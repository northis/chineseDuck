{"code":"webpackHotUpdate(1,{116:function(t,e,o){\"use strict\";o.r(e);var s,n=o(0),r=o.n(n),i=o(29),a=o(4),u=o.n(a),c=o(5),l=o(114),d=o(111),h=o(100),p=function(){this.CurrentMask=\"\",this.IsPhoneReady=!1,this.IsCodeReady=!1,this.UserTel=\"\",this.UserCode=\"\",this.SaveAuth=!1,this.FirstFocusCountry=!0,this.FirstFocusPhone=!0,this.FirstFocusCode=!0,this.CommonError=\"\"},f=o(19),v=o(40),m=o(13),C=(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),b=function(t,e,o,s){var n,r=arguments.length,i=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,o):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(i=(r<3?n(i):r>3?n(e,o,i):n(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},y=o(108).default;r.a.use(y);var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.VM=new p,e}return C(e,t),e.prototype.submit=function(t){var e=this;switch(this.setError(null),this.auth.stage){case c.a.NoAuth:if(t.preventDefault(),!this.VM.IsPhoneReady)return;this.store.dispatch(m.a.actions.sendPhoneNumber)(this.$store,this.VM.UserTel).then(function(t){setTimeout(function(){return e.setFocus(\"inputCode\")}.bind(e),0)}.bind(this)).catch(function(t){return e.setError.bind(e,t)()}),this.store.commit(m.a.mutations.setAuthState)(this.$store,c.a.PhoneSent);break;case c.a.PhoneOk:if(!this.VM.IsCodeReady)return void t.preventDefault();this.store.dispatch(m.a.actions.sendCode)(this.$store,this.VM.UserCode).then(function(o){if(null!=o){var s=t.target;null!=s&&e.$router.push(s.action)}else t.preventDefault()}.bind(this)).catch(this.setError.bind(this)),this.store.commit(m.a.mutations.setAuthState)(this.$store,c.a.CodeSent);break;default:t.preventDefault()}},e.prototype.setError=function(t){null==t?this.VM.CommonError=\"\":(this.VM.CommonError=t.message,this.restoreVM())},e.prototype.restoreVM=function(){this.VM.UserTel=\"\",this.VM.IsPhoneReady=this.VM.IsCodeReady=!1,this.VM.FirstFocusPhone=this.VM.FirstFocusCode=!0},e.prototype.setFocus=function(t){var e=document.getElementById(t);null!=e&&e.focus()},e.prototype.mounted=function(){console.log(\"Login mounted\"),this.store.dispatch(m.a.actions.fetchUser)(this.$store)},e.prototype.created=function(){this.VM.telMasks=this.store.read(m.a.getters.getTelMasks)(this.$store)},Object.defineProperty(e.prototype,\"store\",{get:function(){return Object(v.getStoreAccessors)(f.a.auth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"mainCountries\",{get:function(){var t=this.VM.telMasks;return null===t?null:t.mainCountriesMasks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"otherCountries\",{get:function(){var t=this.VM.telMasks;return null===t?null:t.otherCountriesMasks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isPhoneInvalid\",{get:function(){return!(this.VM.FirstFocusPhone||this.VM.IsPhoneReady&&\"\"!=this.VM.CurrentMask)},enumerable:!0,configurable:!0}),e.prototype.selectedChanged=function(t){this.VM.CurrentMask=t,\"\"!=t&&this.setFocus(\"inputPhone\")},e.prototype.saveAuthChanged=function(t){this.VM.SaveAuth=t},b([i.a],e.prototype,\"auth\",void 0),b([Object(h.Provide)()],e.prototype,\"VM\",void 0),b([Object(h.Emit)()],e.prototype,\"submit\",null),b([Object(h.Emit)()],e.prototype,\"selectedChanged\",null),b([Object(h.Emit)()],e.prototype,\"saveAuthChanged\",null),b([u()({components:{\"app-checkBox\":l.default,\"app-comboBox\":d.default}})],e)}(r.a),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"text-center\"},[s(\"form\",{staticClass:\"form-signin\",attrs:{action:\"/\",method:\"post\",novalidate:\"\"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s(\"img\",{staticClass:\"mb-4\",attrs:{src:o(42),alt:\"\",width:\"72\",height:\"72\"}}),t._v(\" \"),0==t.auth.stage?[s(\"p\",{staticClass:\"text-left\"},[t._v(\"Please type your Telegram-bound phone number\")]),t._v(\" \"),s(\"div\",{staticClass:\"form-group\"},[s(\"app-comboBox\",{class:{\"is-invalid\":\"\"==t.VM.CurrentMask&&!t.VM.FirstFocusCountry},attrs:{useFullList:!0,autofocus:\"\"},on:{selectedChanged:t.selectedChanged,\"~blur\":function(e){t.VM.FirstFocusCountry=!1}}},[t._l(t.mainCountries,function(e){return s(\"option\",{key:e.n,domProps:{value:e.m}},[t._v(\" \"+t._s(e.n))])}),t._v(\" \"),t._l(t.otherCountries,function(e){return s(\"option\",{key:e.n,attrs:{slot:\"FullList\"},domProps:{value:e.m},slot:\"FullList\"},[t._v(\" \"+t._s(e.n))])}),t._v(\" \"),s(\"span\",{attrs:{slot:\"Header\"},slot:\"Header\"},[t._v(\"Select your country \")])],2)],1),t._v(\" \"),s(\"div\",{staticClass:\"form-group\"},[s(\"input\",{directives:[{name:\"mask\",rawName:\"v-mask\",value:t.VM.CurrentMask,expression:\"VM.CurrentMask\"},{name:\"model\",rawName:\"v-model\",value:t.VM.UserTel,expression:\"VM.UserTel\"}],staticClass:\"form-control\",class:{\"is-invalid\":t.isPhoneInvalid},attrs:{type:\"tel\",id:\"inputPhone\"},domProps:{value:t.VM.UserTel},on:{blur:function(e){t.VM.FirstFocusPhone=!1},invalid:function(e){t.VM.IsPhoneReady=!1},focus:function(e){t.VM.IsPhoneReady=!0},input:function(e){e.target.composing||t.$set(t.VM,\"UserTel\",e.target.value)}}}),t._v(\" \"),s(\"div\",{staticClass:\"invalid-feedback\"},[t._v(\"\\n          Invalid phone number.\\n        \")])]),t._v(\" \"),s(\"app-checkBox\",{staticClass:\"mb-3 text-left\",on:{checkedChanged:t.saveAuthChanged}},[t._v(\"Remember me\")]),t._v(\" \"),\"\"!=t.VM.CommonError?s(\"div\",{staticClass:\"mb-3 text-left errorText\"},[t._v(\"\\n        \"+t._s(t.VM.CommonError)+\"\\n      \")]):t._e(),t._v(\" \"),s(\"button\",{staticClass:\"btn-block\",attrs:{type:\"submit\"}},[t._v(\"Send SMS\")])]:t._e(),t._v(\" \"),1==t.auth.stage?s(\"div\",{staticClass:\"form-group\"},[t._v(\"\\n      Sending the phone number...\\n    \")]):t._e(),t._v(\" \"),2==t.auth.stage?[s(\"p\",{staticClass:\"text-left\"},[t._v(\"Please type a code from the SMS you've just received.\")]),t._v(\" \"),s(\"div\",{staticClass:\"form-group\"},[s(\"input\",{directives:[{name:\"mask\",rawName:\"v-mask\",value:\"9999\",expression:\"'9999'\"},{name:\"model\",rawName:\"v-model\",value:t.VM.UserCode,expression:\"VM.UserCode\"}],staticClass:\"form-control\",class:{\"is-invalid\":!t.VM.FirstFocusCode&&!t.VM.IsCodeReady},attrs:{type:\"tel\",id:\"inputCode\"},domProps:{value:t.VM.UserCode},on:{\"~blur\":function(e){t.VM.FirstFocusCode=!1},invalid:function(e){t.VM.IsCodeReady=!1},focus:function(e){t.VM.IsCodeReady=!0},input:function(e){e.target.composing||t.$set(t.VM,\"UserCode\",e.target.value)}}}),t._v(\" \"),s(\"div\",{staticClass:\"invalid-feedback\"},[t._v(\"Invalid code.\")])]),t._v(\" \"),s(\"button\",{staticClass:\"btn-block\",attrs:{type:\"submit\"}},[t._v(\"Send code\")])]:t._e(),t._v(\" \"),3==t.auth.stage?s(\"div\",{staticClass:\"form-group\"},[t._v(\"\\n      Sending the code...\\n    \")]):t._e()],2)])},g=[];_._withStripped=!0,t.hot.accept(),t.hot.data&&o(8).rerender(\"data-v-9fcfedee\",{render:_,staticRenderFns:g});var V,P=o(10),k=!1,F=Object(P.a)(M,_,g,!1,function(t){k||o(115)},null,null);F.options.__file=\"src\\\\components\\\\Login.vue\",(V=o(8)).install(o(0),!1),V.compatible&&(t.hot.accept(),t.hot.data?V.reload(\"data-v-9fcfedee\",F.options):V.createRecord(\"data-v-9fcfedee\",F.options),t.hot.dispose(function(t){k=!0})),e.default=F.exports}});","extractedComments":[]}