<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Мы вместе</title>
</head>
<body>
    <script type="text/javascript">
        function GetTime(time) {
            var together = new Date(time);
            var now = new Date();
            var length = new Date(now - together);

            var years = GetTimeName(length.getYear() - 70, "Years");
            var months = GetTimeName(length.getMonth(), "Months");
            var days = GetTimeName(length.getDate(), "Days");
            var hours = GetTimeName(length.getHours(), "Hours");
            var minutes = GetTimeName(length.getMinutes(), "Minutes");
            var seconds = GetTimeName(length.getSeconds(), "Seconds");

            var res = years + " " + months + " " + days + " " + hours + " " + minutes + " " + seconds
            return res;

        }

        function GetTimeName(timeVal, type) {
            var nameType = 0;
            var valStr = timeVal.toString();

            var last = valStr.charAt(valStr.length - 1);
            var preLast = valStr.charAt(valStr.length - 2);

            if (last == '1' && preLast != '1')
                nameType = 0;
            else if ((last == '2' || last == '3' || last == '4') && preLast != '1')
                nameType = 1;
            else
                nameType = 2;

            switch (type) {
                case "Years":
                    switch (nameType) {
                        case 0:
                            return timeVal + " год";
                        case 1:
                            return timeVal + " года";
                        case 2:
                            return timeVal + " лет";
                        default:
                            return timeVal;
                    }

                    break;
                case "Months":


                    switch (nameType) {
                        case 0:
                            return timeVal + " месяц";
                        case 1:
                            return timeVal + " месяца";
                        case 2:
                            return timeVal + " месяцев";
                        default:
                            return timeVal;
                    }
                    break;
                case "Days":
                    switch (nameType) {
                        case 0:
                            return timeVal + " день";
                        case 1:
                            return timeVal + " дня";
                        case 2:
                            return timeVal + " дней";
                        default:
                            return timeVal;
                    }
                    break;
                case "Hours":
                    switch (nameType) {
                        case 0:
                            return timeVal + " час";
                        case 1:
                            return timeVal + " часа";
                        case 2:
                            return timeVal + " часов";
                        default:
                            return timeVal;
                    }
                    break;
                case "Minutes":
                    switch (nameType) {
                        case 0:
                            return timeVal + " минуту";
                        case 1:
                            return timeVal + " минуты";
                        case 2:
                            return timeVal + " минут";
                        default:
                            return timeVal;
                    }
                    break;
                case "Seconds":
                    switch (nameType) {
                        case 0:
                            return timeVal + " секунду";
                        case 1:
                            return timeVal + " секунды";
                        case 2:
                            return timeVal + " секунд";
                        default:
                            return timeVal;
                    }
                    break;

                default:
                    return timeVal;
            }
        }

        function ViewTime() {
            document.getElementById("timeDiv").innerHTML = "Мы знакомы " + GetTime("4 Jul 2009 22:00") +
            "<br />Мы вместе " + GetTime("21 Nov 2009 14:00") + "<br />Мы женаты " + GetTime("31 Dec 2011 12:30");
        }

        var timer = setInterval("ViewTime()", 500);
    </script>
    <div  id="timeDiv" class="main" style="width:100%; font-weight:bold; font-size:x-large" />
</body>
</html>
