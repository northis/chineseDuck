use chineseDuck

function getNextSequence(name) {
    var ret = db.counters.findAndModify(
        {
            query: { _id: name },
            update: { $inc: { seq: 1 } },
            new: true,
            upsert: true
        }
    );

    return NumberLong(ret.seq);
}

db.users.remove({})
db.folders.remove({})
db.words.remove({})
db.wordFiles.remove({})

var testUserName = "testUser";
var testFolderName = "testFolder";

db.users.insert(
    {
        _id: getNextSequence("userid"),
        username: testUserName,
        joinDate: ISODate(),
    }
)

var userId = db.users.find({ username: testUserName })[0]._id;

db.folders.insert(
    {
        _id: getNextSequence("folderid"),
        name: testFolderName,
        owner_id: userId,
        createDate: ISODate()
    }
)
var folderId = db.folders.find({ name: testFolderName })[0]._id;
var originalWordValue = '自行车';

db.words.insert(
    {
        _id: getNextSequence("wordid"),

        originalWord: originalWordValue,
        pronunciation: 'zi|xing|che',
        translation: 'велосипед',
        usage: '我有一个自行车',
        syllablesCount: NumberInt(3),
        score: {
            originalWordCount: NumberInt(0),
            originalWordSuccessCount: NumberInt(0),
            lastView: ISODate(),
            isInLearnMode: Boolean(false),
            pronunciationCount: NumberInt(0),
            pronunciationSuccessCount: NumberInt(0),
            translationCount: NumberInt(0),
            translationSuccessCount: NumberInt(0),
            viewCount: NumberInt(0)
        },
        owner_id: userId,
        folder_id: folderId
    }
)

var wordId = db.words.find({ owner_id: userId, originalWord: originalWordValue })[0]._id;

db.wordFiles.insert(
    {
        createDate: ISODate(),
        word_id: wordId,
        height: NumberInt(70),
        width: NumberInt(251),
        fileType: 'orig',
        bytes: BinData(0, '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')
    }
)